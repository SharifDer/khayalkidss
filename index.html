<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://www.googletagmanager.com">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FH22NPFLYR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-FH22NPFLYR');
    </script>
    <!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1367819575075084');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1367819575075084&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khayal Kids - Ù‚ØµØµ Ø§Ù„Ø£Ø·ÙØ§Ù„</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/jpg" href="img/logo.jpg">

<style>
/* ================= BODY & FONT ================= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
body {
    font-family: 'Tajawal', sans-serif;
    background: #D8F3FF !important; 
    color: #1b1b1b; 
    margin: 0;
    min-height: 100vh;
    transition: background 0.5s, color 0.5s;
    overflow-x: hidden;
}

/* Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
h1, h2, h5, p {
    color: #1b1b1b;
    transition: color 0.5s;
}

/* Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© */
.text-secondary {
    color: #555 !important;
    transition: color 0.5s;
}

/* ================= NAVBAR ================= */
.navbar-custom {
    background: #53A6A0; 
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    padding: 12px 0;
    transition: background 0.5s;
}
.navbar-brand {
    color: #fff;
    font-weight: 700;
}
.navbar-brand:hover {
    color: #ffe4fa; 
    text-decoration: none;
}
.navbar-brand img {
    border-radius: 50%;
    border: 2px solid #fff;
    transition: all 0.3s ease;
}
.navbar .nav-link {
    color: #fff;
    transition: color 0.3s;
}
.navbar .nav-link:hover {
    color: #ffe4fa;
}
.form-select {
    border-radius: 6px;
    background: #c0f0f7;
    color: #1b1b1b;
    border: 1px solid #53A6A0;
    transition: background 0.5s, color 0.5s;
}
.form-select option {
    background: #c0f0f7;
    color: #1b1b1b;
}

/* ================= ANIMATION ================= */
.fade-up {
    opacity: 0;
    transform: translateY(50px) scale(0.9) rotate(-5deg);
    transition: all 0.7s ease-out;
}
.fade-up.show {
    opacity: 1;
    transform: translateY(0) scale(1) rotate(0deg);
}

/* Disable animations ONLY for Instagram browser */
body.instagram-browser .fade-up {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
}

/* ================= SECTIONS ================= */
.section {
    padding: 60px 0;
}
.section-title {
    text-align: center;
    margin-bottom: 40px;
    font-size: 32px;
    font-weight: 700;
    color: #1b1b1b;
    transition: color 0.5s;
}
.section-title span {
    color: #ffc107;
}

/* ================= CHILD CARDS ================= */
.child-card {
    width: 400px;
    height: 300px;
    overflow: hidden;
    margin: 10px;
    border-radius: 15px;      
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    transition: all 0.5s ease;
}
.child-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 15px;
    transition: all 0.5s ease;
}
.child-card img:hover {
    transform: scale(1.1) rotate(3deg);
    box-shadow: 0 12px 25px rgba(0,0,0,0.3);
    cursor: pointer;
}

/* ================= STORY CARDS ================= */
.story-card {
    max-width: 100%;
    background: #f0f8ff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    transition: transform 0.3s, box-shadow 0.3s;
}

.story-card img {
    width: 400px;
    height: 300px;
    object-fit: contain;
    background-color: #f0f8ff;
    border-radius: 12px;
    transition: all 0.5s ease;
}

.story-card-body {
    text-align: center;
    padding: 20px;
}

.story-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.3);
}

.story-card img:hover {
    transform: scale(1.05) rotate(2deg);
}

.story-card-body h5, .story-card-body p {
    color: #1b1b1b;
    transition: color 0.5s;
}
.story-card:hover .story-card-body h5 {
    transform: translateY(-5px);
    color: #53A6A0;
}

/* ================= SERVICE & HERO ================= */
.service-section {
    background: #53A6A0;
    color: #fff;
    text-align: center;
    padding: 20px 15px;
    border-radius: 12px;
    font-size: 18px;
    font-weight: 600;
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    max-width: 500px;
    margin: 0 auto;
    transition: background 0.5s, color 0.5s;
}

/* ================= ORDER FORM ================= */
.order-form {
    background: #f0f8ff;
    padding: 40px;
    border-radius: 15px;
    max-width: 600px;
    margin: auto;
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    transition: background 0.5s;
}
.form-control, .form-select {
    background: #c0f0f7;
    color: #1b1b1b;
    border: 1px solid #53A6A0;
}
.form-control:focus {
    background: #e0f8ff;
    color: #1b1b1b;
    box-shadow: none;
    border-color: #53A6A0;
}
.btn-primary {
    background: #53A6A0;
    border: none;
    color: #fff;
    transition: background 0.5s, color 0.5s;
    font-size: 18px;
    padding: 12px 30px;
    font-weight: 600;
}
.btn-primary:hover {
    background: #3e817a;
}
.price-info {
    margin-top: 10px;
    font-weight: 600;
    color: #53A6A0;
    transition: color 0.5s;
}

/* NEW: What You Get Box */
.what-you-get {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 25px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
.what-you-get h4 {
    color: #53A6A0;
    margin-bottom: 15px;
    font-size: 20px;
}
.what-you-get ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
.what-you-get ul li {
    padding: 8px 0;
    font-size: 16px;
    color: #1b1b1b;
}

/* ================= DARK MODE ================= */
body.dark-mode {
    background: #0d1b2a;
    color: #fff;
}
body.dark-mode h1,
body.dark-mode h2,
body.dark-mode h5,
body.dark-mode p,
body.dark-mode .text-secondary {
    color: #fff;
}
body.dark-mode .navbar-custom {
    background: #0f1a2b;
}
body.dark-mode .form-control,
body.dark-mode .form-select {
    background: #16222a;
    color: #fff;
    border: 1px solid #53A6A0;
}
body.dark-mode .story-card {
    background: #1b263b;
    box-shadow: 0 6px 20px rgba(0,0,0,0.5);
}
body.dark-mode .story-card-body h5,
body.dark-mode .story-card-body p {
    color: #fff;
}
body.dark-mode .child-card {
    box-shadow: 0 6px 20px rgba(0,0,0,0.5);
}
body.dark-mode .service-section {
    background: #1b263b;
    color: #fff;
}
body.dark-mode .order-form {
    background: #1b263b;
}
body.dark-mode .btn-primary {
    background: #53A6A0;
    color: #fff;
}
body.dark-mode .price-info {
    color: #53A6A0;
}
body.dark-mode .what-you-get {
    background: #16222a;
}
body.dark-mode .what-you-get h4 {
    color: #53A6A0;
}
body.dark-mode .what-you-get ul li {
    color: #fff;
}

/* ====== FIX MOBILE RESPONSIVE IMAGES ====== */
@media (max-width: 576px) {
    .child-card {
        width: 100% !important;
        height: auto !important;
    }
    .child-card img {
        width: 100% !important;
        height: auto !important;
        object-fit: contain !important;
    }
    .story-card img {
        height: auto !important;
        object-fit: contain !important;
    }
    .section {
        padding: 40px 0 !important;
    }
    .section-title {
        font-size: 26px !important;
        margin-bottom: 25px !important;
    }
}
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-custom sticky-top">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="#">
            <img src="img/logo.jpg" style="width:40px; height:40px; object-fit:cover;" class="ms-2" alt="Logo">
            Ø£Ù†Ø§ Ø¨Ø·Ù„ Ù‚ØµØªÙŠ
        </a>
        <div class="d-flex align-items-center mt-2 mt-lg-0">
            <select class="form-select form-select-sm ms-3" style="width:80px;">
                <option>USD</option>
                <option>EUR</option>
                <option>SAR</option>
            </select>
            <a href="#" class="ms-3"><img src="https://img.icons8.com/ios-glyphs/24/search--v1.png" alt="Search"></a>
            <a href="#" class="ms-2"><img src="https://img.icons8.com/ios-glyphs/24/user.png" alt="User"></a>
            <button id="mode-toggle" class="btn btn-sm btn-outline-light ms-3">
                <svg id="icon-light" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="5"></circle>
                    <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                </svg>
                <svg id="icon-dark" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="display:none">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                </svg>
            </button>
        </div>
    </div>
</nav>

<section class="section">
    <div class="container text-center">
        
        <h1 class="section-title mb-3">Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ ÙƒØªØ§Ø¨ ÙØ§Ø®Ø± Ù…Ø·Ø¨ÙˆØ¹ Ø¨Ø§Ø³Ù… ÙˆØµÙˆØ±Ø© Ø·ÙÙ„Ùƒ</h1>
        <p style="font-size: 18px; color: #555; margin-bottom: 30px;">
            ÙƒØªØ§Ø¨ Ù…Ø·Ø¨ÙˆØ¹ 24 ØµÙØ­Ø© - ØµÙˆØ±Ø© Ø·ÙÙ„Ùƒ ÙÙŠ ÙƒÙ„ ØµÙØ­Ø© - ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ
        </p>
        
        <div class="row g-4 justify-content-center">
            <div class="col-md-4 fade-up">
                <div class="child-card">
                    <img src="img/1.jpg" alt="Ø·ÙÙ„ 1">
                </div>
            </div>
            <div class="col-md-4 fade-up">
                <div class="child-card">
                    <img src="img/2.jpg" alt="Ø·ÙÙ„ 2">
                </div>
            </div>
        </div>
        <h5 class="text-secondary mt-4">Ø£Ù†Ø´Ø¦ Ù‚ØµÙ€Ø© Ø·ÙÙ„Ù€Ùƒ Ø¨Ù†ÙØ³Ùƒ !</h5>
    </div>
</section>

<!-- FORM SECTION -->
<!-- FORM SECTION -->
<section class="section">
    <div class="container">
        <div class="service-section fade-up" style="margin-bottom: 40px;">
           ğŸ‰ Ø¹Ø±Ø¶ ØªØ¬Ø±ÙŠØ¨ÙŠ Ø®Ø§Øµ - Ø£ÙˆÙ„ 20 Ø¹Ø§Ø¦Ù„Ø© ÙÙ‚Ø·!
           <br><br>
           Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù† Ø¨Ø³Ø¹Ø± 15$ ÙÙ‚Ø· Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† 35$ âœ¨
        </div>
        
        <div class="order-form fade-up">
            <!-- What You Get Section -->
            <div class="what-you-get">
                <h4>ğŸ“¦ Ù…Ø§Ø°Ø§ Ø³ØªØ­ØµÙ„ Ø¹Ù„ÙŠÙ‡:</h4>
                <ul>
                    <li>âœ… ÙƒØªØ§Ø¨ Ù…Ø·Ø¨ÙˆØ¹ ÙØ§Ø®Ø± 24 ØµÙØ­Ø©</li>
                    <li>âœ… ØµÙˆØ±Ø© Ø·ÙÙ„Ùƒ ÙÙŠ ÙƒÙ„ ØµÙØ­Ø©</li>
                    <li>âœ… Ø§Ø³Ù…Ù‡ ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù‚ØµØ©</li>
                    <li>âœ… ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ§Ù„Ø®Ù„ÙŠØ¬</li>
                    <li>âœ… ÙŠØµÙ„Ùƒ Ø®Ù„Ø§Ù„ 3 Ø£Ø³Ø§Ø¨ÙŠØ¹</li>
                </ul>
            </div>

            <!-- FORM DIRECTLY AFTER "What You Get" -->
            <h3 class="mb-4 text-center" style="margin-top: 30px;">Ø§Ø­Ø¬Ø² Ù†Ø³Ø®ØªÙƒ - Ù…ØªØ¨Ù‚ÙŠ 13 ÙƒØªØ§Ø¨ ÙÙ‚Ø·</h3>
            <form id="storyForm">
                <div class="mb-3">
                    <label for="name" class="form-label">Ø§Ù„Ø§Ø³Ù… <span style="color:red">*</span></label>
                    <input type="text" class="form-control" id="name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ">
                    <div class="invalid-feedback" id="nameError" style="display:none;">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…</div>
                </div>
                <div class="mb-3">
                    <label for="phone" class="form-label">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
                    <input type="tel" class="form-control" id="phone" style="text-align: right;" placeholder="Ù…Ø«Ø§Ù„: 0501234567 Ø£Ùˆ 00966501234567">
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</label>
                    <input type="email" class="form-control" id="email" placeholder="Ù…Ø«Ø§Ù„: ahmed@gmail.com" required>
                    <div class="invalid-feedback" id="contactError" style="display:none;">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
                </div>

                <p class="price-info" style="text-align: center; line-height: 1.8; font-size: 16px;">
                    ğŸ’° Ø³Ø¹Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ: 15$ ÙÙ‚Ø· (Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¹Ø§Ø¯ÙŠ 35$)
                    <br>
                    â° Ø§Ù„Ø¹Ø±Ø¶ Ù…Ø­Ø¯ÙˆØ¯ - 13 Ù…Ù‚Ø¹Ø¯ Ù…ØªØ¨Ù‚ÙŠ ÙÙ‚Ø·
                </p>

                <div class="text-center mt-3">
                    <button type="submit" class="btn btn-primary">Ø§Ø­Ø¬Ø² ÙƒØªØ§Ø¨ÙŠ Ø§Ù„Ø¢Ù† - 15$ ÙÙ‚Ø·</button>
                </div>
            </form>

            <!-- REVIEWS MOVED HERE - After form -->
            <div style="background: linear-gradient(135deg, #f0f8ff 0%, #e0f2f7 100%); padding: 20px; border-radius: 12px; margin-top: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.08);">
                <h4 style="color: #53A6A0; margin-bottom: 15px; text-align: center; font-size: 18px; font-weight: 700;">
                    â­ Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                </h4>
                
                <!-- Review 1 -->
                <div style="background: white; padding: 12px; border-radius: 8px; margin-bottom: 12px; border-right: 3px solid #53A6A0;">
                    <div style="display: flex; align-items: center; margin-bottom: 6px;">
                        <div style="background: #53A6A0; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-left: 8px; font-size: 14px;">
                            Ø£
                        </div>
                        <div>
                            <div style="font-weight: 600; color: #1b1b1b; font-size: 14px;">Ø£Ù… Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡</div>
                            <div style="color: #ffc107; font-size: 13px;">â­â­â­â­â­</div>
                        </div>
                    </div>
                    <p style="color: #555; font-size: 13px; line-height: 1.5; margin: 0;">
                        "ÙƒØªØ§Ø¨ Ø±Ø§Ø¦Ø¹! Ø§Ø¨Ù†ØªÙŠ Ø³Ø§Ø±Ø© Ø£Ø­Ø¨ØªÙ‡ Ø¬Ø¯Ø§Ù‹ ğŸ“–"
                    </p>
                    <div style="color: #999; font-size: 11px; margin-top: 5px;">Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</div>
                </div>
                
                <!-- Review 2 -->
                <div style="background: white; padding: 12px; border-radius: 8px; border-right: 3px solid #53A6A0;">
                    <div style="display: flex; align-items: center; margin-bottom: 6px;">
                        <div style="background: #53A6A0; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-left: 8px; font-size: 14px;">
                            Ø£
                        </div>
                        <div>
                            <div style="font-weight: 600; color: #1b1b1b; font-size: 14px;">Ø£Ù… Ù…Ø­Ù…Ø¯</div>
                            <div style="color: #ffc107; font-size: 13px;">â­â­â­â­â­</div>
                        </div>
                    </div>
                    <p style="color: #555; font-size: 13px; line-height: 1.5; margin: 0;">
                        "Ø¬ÙˆØ¯Ø© Ø·Ø¨Ø§Ø¹Ø© Ù…Ù…ØªØ§Ø²Ø© ÙˆØ§Ù„ØµÙˆØ± ÙˆØ§Ø¶Ø­Ø© Ø¬Ø¯Ø§Ù‹ ğŸ‰"
                    </p>
                    <div style="color: #999; font-size: 11px; margin-top: 5px;">Ø¯Ø¨ÙŠØŒ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</div>
                </div>
            </div>

            <!-- Money Back Guarantee -->
            <div style="text-align: center; margin-top: 15px; padding: 10px; background: #fff3cd; border-radius: 8px; border: 2px dashed #ffc107;">
                <p style="color: #856404; font-weight: 600; margin: 0; font-size: 14px;">
                    ğŸ’¯ Ø¶Ù…Ø§Ù† Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø®Ù„Ø§Ù„ 14 ÙŠÙˆÙ…
                </p>
            </div>
        </div>
    </div>
</section>


<section class="section">
    <div class="container">
        <h2 class="section-title mb-4 text-center">Ø§Ø®ØªØ± Ø§Ù„Ù‚ØµØ© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯Ù‡Ø§</h2>
        <div class="text-center mb-4">
            <button class="btn btn-sm btn-outline-dark">Ø§Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ â†</button>
        </div>
        <div class="row g-4 justify-content-center">
            <div class="col-md-4 fade-up">
                <div class="story-card">
                    <img src="img/story.jpg" loading="lazy" alt="Ù‚ØµØ©1">
                    <div class="story-card-body">
                        <h5>Ù‚ØµØ© Ø§Ù„Ø·Ø¨ÙŠØ¹Ù€Ø©</h5>
                        <p class="price-info">$25 - $30</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 fade-up">
                <div class="story-card">
                    <img src="img/story1.jpg" loading="lazy" alt="Ù‚ØµØ©2">
                    <div class="story-card-body">
                        <h5>Ù‚ØµØ© Ø§Ù„Ø¯ÙŠÙ†Ø§ØµÙˆØ±Ø§Øª</h5>
                        <p class="price-info">$25 - $30</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 fade-up">
                <div class="story-card">
                    <img src="img/story3.jpg" loading="lazy" alt="Ù‚ØµØ©3">
                    <div class="story-card-body">
                        <h5>Ù‚ØµØ© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª</h5>
                        <p class="price-info">$25 - $30</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Detect Instagram browser
if (navigator.userAgent.includes('Instagram')) {
    document.body.classList.add('instagram-browser');
}

// Fade up animation
const isInstagram = navigator.userAgent.includes('Instagram');
if (!isInstagram) {
    const faders = document.querySelectorAll('.fade-up');
    const appearOptions = { threshold: 0.1 };
    const appearOnScroll = new IntersectionObserver(function(entries, appearOnScroll) {
        entries.forEach(entry => {
            if (!entry.isIntersecting) return;
            entry.target.classList.add('show');
            appearOnScroll.unobserve(entry.target);
        });
    }, appearOptions);
    faders.forEach(fader => appearOnScroll.observe(fader));
} else {
    document.querySelectorAll('.fade-up').forEach(el => el.classList.add('show'));
}

// Dark mode toggle
const toggleBtn = document.getElementById('mode-toggle');
const iconLight = document.getElementById('icon-light');
const iconDark = document.getElementById('icon-dark');
if(toggleBtn) {
    toggleBtn.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        if(document.body.classList.contains('dark-mode')){
            iconLight.style.display = 'none';
            iconDark.style.display = 'inline';
        } else {
            iconLight.style.display = 'inline';
            iconDark.style.display = 'none';
        }
    });
}

// Form submission
document.getElementById('storyForm').addEventListener('submit', function(e) {
    e.preventDefault(); 
    const nameInput = document.getElementById('name');
    const phoneInput = document.getElementById('phone');
    const emailInput = document.getElementById('email');
    const nameError = document.getElementById('nameError');
    const contactError = document.getElementById('contactError');
    const submitBtn = this.querySelector('button[type="submit"]');

    const name = nameInput.value.trim();
    const phone = phoneInput.value.trim();
    const email = emailInput.value.trim();

    let valid = true;

    if (!name) {
        nameError.style.display = 'block';
        valid = false;
    } else {
        nameError.style.display = 'none';
    }

    if (!email) {
        contactError.style.display = 'block';
        valid = false;
    } else {
        contactError.style.display = 'none';
    }

    if (!valid) return; 

    const originalBtnText = submitBtn.innerText;
    submitBtn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø¬Ø²...";
    submitBtn.disabled = true;

    let formattedPhone = phone;
    if (phone && phone.trim() !== "") {
        formattedPhone = phone.replace(/\D/g, '');
        if (!formattedPhone.startsWith('00')) {
            formattedPhone = '00' + formattedPhone;
        }
    }

    const payload = {
        name: name,
        email: email === "" ? null : email,
        phone: formattedPhone === "" ? null : formattedPhone
    };

    fetch('https://api.khayalkids.com/save', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
    })
    .then(async response => {
        if (!response.ok) {
            const errData = await response.json().catch(() => ({}));
            throw new Error(errData.detail || 'Server Error');
        }
        return response.json();
    })
    .then(data => {
        fbq('track', 'CompleteRegistration');
        alert('ğŸ‰ ØªÙ… Ø­Ø¬Ø² ÙƒØªØ§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø© Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨.');
        document.getElementById('storyForm').reset(); 
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø². ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    })
    .finally(() => {
        submitBtn.innerText = originalBtnText;
        submitBtn.disabled = false;
    });
});
</script>
</body>
</html>
